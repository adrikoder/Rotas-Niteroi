conexaoGH(c1, c2, "Av. Jorn. Alberto Franciso Torres", 150, 2108).
conexaoGH(c2, c1, "Av. Jorn. Alberto Franciso Torres", 150, 2232).

conexaoGH(c2, c3, "Av. Jorn. Alberto Franciso Torres", 120, 1984).
conexaoGH(c3, c2, "Av. Jorn. Alberto Franciso Torres", 120, 2108).

conexaoGH(c3, c4, "Av. Jorn. Alberto Franciso Torres", 150, 1860).
conexaoGH(c4, c3, "Av. Jorn. Alberto Franciso Torres", 150, 1984).

conexaoGH(c4, c5, "Av. Jorn. Alberto Franciso Torres", 150, 1736).
conexaoGH(c5, c4, "Av. Jorn. Alberto Franciso Torres", 150, 1860).

conexaoGH(c5, c6, "Av. Jorn. Alberto Franciso Torres", 150, 1612).
conexaoGH(c6, c5, "Av. Jorn. Alberto Franciso Torres", 150, 1736).

conexaoGH(c6, c7, "Av. Jorn. Alberto Franciso Torres", 120, 1488).
conexaoGH(c7, c6, "Av. Jorn. Alberto Franciso Torres", 120, 1612).

conexaoGH(c7, c8, "Av. Jorn. Alberto Franciso Torres", 130,1364).
conexaoGH(c8, c7, "Av. Jorn. Alberto Franciso Torres", 130, 1488).

conexaoGH(c8, c9, "Av. Jorn. Alberto Franciso Torres", 120, 1240).
conexaoGH(c9, c8, "Av. Jorn. Alberto Franciso Torres", 120, 1364).

conexaoGH(c9, c10, "Av. Jorn. Alberto Franciso Torres", 140, 1116).
conexaoGH(c10, c9, "Av. Jorn. Alberto Franciso Torres", 140, 1240).

conexaoGH(c10, c11, "Av. Jorn. Alberto Franciso Torres", 140, 992).
conexaoGH(c11, c10, "Av. Jorn. Alberto Franciso Torres", 140, 1116).


conexaoGH(c13, c1, "R. Miguel de Frias", 200, 2232).

conexaoGH(c14, c13, "R. Miguel de Frias", 150, 2232).

conexaoGH(c15, c14, "R. Miguel de Frias", 160, 2356).

conexaoGH(c16, c15, "R. Miguel de Frias", 150, 2232).

conexaoGH(c17, c16, "R. Miguel de Frias", 130, 2232).



conexaoGH(c22, c23, "R. castilho França", 120, 2108).



conexaoGH(c69, c17, "R. Dr. Paulo césar", 180, 2356).

conexaoGH(c71, c69, "R. Dr. Paulo césar", 150, 1860).

conexaoGH(c74, c71, "R. Dr. Paulo césar", 180, 1860).



conexaoGH(c2, c18, "R. Álvares de Azevedo", 170, 2108).

conexaoGH(c18, c19, "R. Álvares de Azevedo", 150, 2232).

conexaoGH(c19, c20, "R. Álvares de Azevedo", 150, 2108).

conexaoGH(c20, c21, "R. Álvares de Azevedo", 130, 1984).

conexaoGH(c21, c24, "R. Álvares de Azevedo", 120, 1984).

conexaoGH(c24, c69, "R. Álvares de Azevedo", 120, 1860).



conexaoGH(c29, c3, "R. Gen. Pereira da Silva", 170, 1984).

conexaoGH(c28, c29, "R. Gen. Pereira da Silva", 140, 1984).

conexaoGH(c27, c28, "R. Gen. Pereira da Silva", 150, 2108).

conexaoGH(c26, c27, "R. Gen. Pereira da Silva", 140, 1984).

conexaoGH(c25, c26, "R. Gen. Pereira da Silva", 110, 1860).

conexaoGH(c70, c25, "R. Gen. Pereira da Silva", 110, 1984).

conexaoGH(c71, c70, "R. Gen. Pereira da Silva", 120, 1736).



conexaoGH(c4, c30, "R. Pres. Backer", 170, 1860).

conexaoGH(c30, c31, "R. Pres. Backer", 130, 1984).

conexaoGH(c31, c32, "R. Pres. Backer", 110, 1860).

conexaoGH(c32, c33, "R. Pres. Backer", 140, 1736).

conexaoGH(c33, c34, "R. Pres. Backer", 120, 1736).

conexaoGH(c34, c72, "R. Pres. Backer", 130, 1612).

conexaoGH(c72, c73, "R. Pres. Backer", 110, 1488).

conexaoGH(c73, c74, "R. Pres. Backer", 90, 1364).

conexaoGH(c74, c76, "R. Pres. Backer", 75, 1240).

conexaoGH(c76, c78, "R. Pres. Backer", 90, 1116).



conexaoGH(c38, c37, "R. cap. Zeferino", 100, 2108).



conexaoGH(c5, c35, "R. Lopes Trovão", 170, 1736).

conexaoGH(c35, c36, "R. Lopes Trovão", 130, 1736).

conexaoGH(c36, c39, "R. Lopes Trovão", 110, 1612).

conexaoGH(c39, c40, "R. Lopes Trovão", 150, 1612).

conexaoGH(c40, c41, "R. Lopes Trovão", 130, 1488).

conexaoGH(c41, c83, "R. Lopes Trovão", 120, 1364).

conexaoGH(c83, c84, "R. Lopes Trovão", 100, 1240).

conexaoGH(c84, c75, "R. Lopes Trovão", 110, 1240).

conexaoGH(c75, c77, "R. Lopes Trovão", 90, 1116).

conexaoGH(c77, c79, "R. Lopes Trovão", 80, 992).

conexaoGH(c79, c80, "R. Lopes Trovão", 90, 1488).



conexaoGH(c6, c42, "R. Otávio carneiro", 170, 1612).

conexaoGH(c42, c43, "R. Otávio carneiro", 140, 1612).

conexaoGH(c43, c44, "R. Otávio carneiro", 120, 1488).



conexaoGH(c6, c42, "R. Otávio carneiro", 170, 1612).

conexaoGH(c42, c43, "R. Otávio carneiro", 140, 1612).

conexaoGH(c43, c44, "R. Otávio carneiro", 120, 1488).



conexaoGH(c85, c81, "R. Dr. Herotides de Oliveira", 130, 1612).

conexaoGH(c86, c85, "R. Dr. Herotides de Oliveira", 110, 1240).

conexaoGH(c87, c86, "R. Dr. Herotides de Oliveira", 105, 1116).



conexaoGH(c87, c88, "Tv. Dr. césar couple", 120, 868).



conexaoGH(c82, c90, "R. Prof. Miguel couto", 130, 1116).

conexaoGH(c90, c91, "R. Prof. Miguel couto", 100, 992).

conexaoGH(c91, c92, "R. Prof. Miguel couto", 11, 868).

conexaoGH(c92, c93, "R. Prof. Miguel couto", 110, 744).

conexaoGH(c93, c89, "R. Prof. Miguel couto", 100, 1612).



conexaoGH(c7, c45, "R. Belisário Augusto", 170, 1488).



conexaoGH(c50, c49, "R. Domingues de Sá", 100, 1364).

conexaoGH(c51, c50, "R. Domingues de Sá", 90, 1240).

conexaoGH(c94, c51, "R. Domingues de Sá", 110, 1364).

conexaoGH(c95, c94, "R. Domingues de Sá", 90, 992).

conexaoGH(c96, c95, "R. Domingues de Sá", 100, 868).

conexaoGH(c97, c96, "R. Domingues de Sá", 145, 992).

conexaoGH(c98, c97, "R. Domingues de Sá", 95, 620).



conexaoGH(c46, c8, "R. Osvaldo cruz", 180, 1364).



conexaoGH(c52, c53, "R. cinco de Julho", 90, 1116).

conexaoGH(c53, c54, "R. cinco de Julho", 100, 992).

conexaoGH(c54, c99, "R. cinco de Julho", 120, 868).

conexaoGH(c99, c100, "R. cinco de Julho", 110, 744).

conexaoGH(c100, c101, "R. cinco de Julho", 120, 620).

conexaoGH(c101, c102, "R. cinco de Julho", 140, 496).

conexaoGH(c102, c103, "R. cinco de Julho", 100, 868).



conexaoGH(c9, c47, "R. Mariz e Barros", 190, 1240).

conexaoGH(c47, c48, "R. Mariz e Barros", 300, 1116).

conexaoGH(c48, c61, "R. Mariz e Barros", 40, 1116).

conexaoGH(c61, c55, "R. Mariz e Barros", 30, 992).

conexaoGH(c55, c56, "R. Mariz e Barros", 130, 868).

conexaoGH(c56, c104, "R. Mariz e Barros", 120, 744).

conexaoGH(c104, c105, "R. Mariz e Barros", 120, 620).

conexaoGH(c105, c106, "R. Mariz e Barros", 110, 496).

conexaoGH(c106, c107, "R. Mariz e Barros", 140, 372).

conexaoGH(c107, c108, "R. Mariz e Barros", 100, 992).



conexaoGH(c57, c10, "R. comendador Queirós", 190, 1116).



conexaoGH(c57, c58, "Alameda carolina", 280, 992).



conexaoGH(c59, c58, "Av. Sete de Setembro", 40, 992).

conexaoGH(c60, c59, "Av. Sete de Setembro", 30, 1116).

conexaoGH(c161, c60, "Av. Sete de Setembro", 120, 868).

conexaoGH(c109, c161, "Av. Sete de Setembro", 110, 992).

conexaoGH(c110, c109, "Av. Sete de Setembro", 100, 620).

conexaoGH(c111, c110, "Av. Sete de Setembro", 90, 744).

conexaoGH(c112, c111, "Av. Sete de Setembro", 165, 620).

conexaoGH(c113, c112, "Av. Sete de Setembro", 110, 248).



conexaoGH(c63, c64, "R. Dr. carlos Halfeld", 110, 744).

conexaoGH(c64, c65, "R. Dr. carlos Halfeld", 110, 620).



conexaoGH(c65, c114, "Rua Francisco Dutra", 110, 496).

conexaoGH(c114, c115, "Rua Francisco Dutra", 160, 744).



conexaoGH(c11, c62, "Av. Alm. Ary Parreiras", 250, 868).
conexaoGH(c62, c11, "Av. Alm. Ary Parreiras", 250, 992).

conexaoGH(c62, c66, "Av. Alm. Ary Parreiras", 270, 744).
conexaoGH(c66, c62, "Av. Alm. Ary Parreiras", 270, 868).

conexaoGH(c66, c67, "Av. Alm. Ary Parreiras", 100, 620).
conexaoGH(c67, c66, "Av. Alm. Ary Parreiras", 100, 744).

conexaoGH(c67, c68, "Av. Alm. Ary Parreiras", 110, 496).

conexaoGH(c68, c116, "Av. Alm. Ary Parreiras", 130, 372).

conexaoGH(c116, c117, "Av. Alm. Ary Parreiras", 170, 248).

conexaoGH(c117, c118, "Av. Alm. Ary Parreiras", 190, 124).

conexaoGH(c118, c119, "Av. Alm. Ary Parreiras", 120, 0).



conexaoGH(c13, c18, "R. Ator Paulo Gustavo", 150, 2108).

conexaoGH(c18, c29, "R. Ator Paulo Gustavo", 120, 1984).

conexaoGH(c29, c30, "R. Ator Paulo Gustavo", 150, 1860).

conexaoGH(c30, c35, "R. Ator Paulo Gustavo", 150, 1736).

conexaoGH(c35, c42, "R. Ator Paulo Gustavo", 150, 1612).

conexaoGH(c42, c45, "R. Ator Paulo Gustavo", 120, 1488).

conexaoGH(c45, c46, "R. Ator Paulo Gustavo", 130, 1364).

conexaoGH(c46, c47, "R. Ator Paulo Gustavo", 120, 1240).

conexaoGH(c47, c57, "R. Ator Paulo Gustavo", 140, 1116).

conexaoGH(c62, c57, "R. Ator Paulo Gustavo", 140, 1116).



conexaoGH(c19, c14, "Rua Dr. Tavares de Macedo", 150, 2356).

conexaoGH(c28, c19, "Rua Dr. Tavares de Macedo", 120, 2232).

conexaoGH(c31, c28, "Rua Dr. Tavares de Macedo", 150, 2108).

conexaoGH(c37, c31, "Rua Dr. Tavares de Macedo", 80, 1984).

conexaoGH(c36, c37, "Rua Dr. Tavares de Macedo", 70, 2108).

conexaoGH(c43, c36, "Rua Dr. Tavares de Macedo", 150, 1736).



conexaoGH(c15, c20, "R. Gavião Peixoto", 160, 2108).

conexaoGH(c20, c27, "R. Gavião Peixoto", 130, 1984).

conexaoGH(c27, c32, "R. Gavião Peixoto", 150, 1860).

conexaoGH(c32, c38, "R. Gavião Peixoto", 70, 1736).

conexaoGH(c38, c39, "R. Gavião Peixoto", 80, 1612).

conexaoGH(c39, c44, "R. Gavião Peixoto", 160, 1488).

conexaoGH(c44, c49, "R. Gavião Peixoto", 130, 1364).

conexaoGH(c49, c52, "R. Gavião Peixoto", 120, 1240).

conexaoGH(c52, c48, "R. Gavião Peixoto", 130, 1116).

conexaoGH(c48, c58, "R. Gavião Peixoto", 140, 992).

conexaoGH(c58, c63, "R. Gavião Peixoto", 110, 868).

conexaoGH(c63, c66, "R. Gavião Peixoto", 100, 744).



conexaoGH(c16, c23, "R. Mem de Sá", 70, 2108).

conexaoGH(c23, c21, "R. Mem de Sá", 80, 1984).

conexaoGH(c21, c26, "R. Mem de Sá", 120, 1860).

conexaoGH(c26, c33, "R. Mem de Sá", 140, 1736).

conexaoGH(c33, c40, "R. Mem de Sá", 150, 1612).



conexaoGH(c61, c59, "R. Dr. Miguel Viêira Ferreira", 130, 1116).



conexaoGH(c50, c53, "Rua Lemos cunha", 120, 1116).

conexaoGH(c53, c55, "Rua Lemos cunha", 130, 992).

conexaoGH(c55, c60, "Rua Lemos cunha", 120, 868).

conexaoGH(c60, c64, "Rua Lemos cunha", 100, 744).

conexaoGH(c64, c67, "Rua Lemos cunha", 100, 620).



conexaoGH(c22, c17, "Av. Roberto Silveira", 80, 2356).

conexaoGH(c24, c22, "Av. Roberto Silveira", 70, 2232).

conexaoGH(c25, c24, "Av. Roberto Silveira", 110, 1984).

conexaoGH(c34, c25, "Av. Roberto Silveira", 150, 1984).

conexaoGH(c41, c34, "Av. Roberto Silveira", 130, 1736).

conexaoGH(c81, c41, "Av. Roberto Silveira", 80, 1488).

conexaoGH(c82, c81, "Av. Roberto Silveira", 90, 1612).

conexaoGH(c51, c82, "Av. Roberto Silveira", 90, 1240).

conexaoGH(c54, c51, "Av. Roberto Silveira", 110, 1364).

conexaoGH(c56, c54, "Av. Roberto Silveira", 120, 992).

conexaoGH(c161, c56, "Av. Roberto Silveira", 130, 868).

conexaoGH(c65, c161, "Av. Roberto Silveira", 90, 992).

conexaoGH(c68, c65, "Av. Roberto Silveira", 110, 620).



conexaoGH(c69, c70, "R. Mario Alves", 100, 1736).

conexaoGH(c70, c72, "R. Mario Alves", 110, 1612).



conexaoGH(c83, c85, "R. Min. Otávio Kelly", 90, 1240).

conexaoGH(c85, c90, "R. Min. Otávio Kelly", 110, 1116).

conexaoGH(c90, c94, "R. Min. Otávio Kelly", 100, 992).

conexaoGH(c94, c99, "R. Min. Otávio Kelly", 135, 868).

conexaoGH(c99, c104, "R. Min. Otávio Kelly", 130, 744).

conexaoGH(c104, c109, "R. Min. Otávio Kelly", 140, 620).

conexaoGH(c109, c114, "R. Min. Otávio Kelly", 110, 496).

conexaoGH(c114, c116, "R. Min. Otávio Kelly", 120, 372).



conexaoGH(c73, c71, "R. Santos Dumont", 130, 1860).



conexaoGH(c84, c86, "R. Nóbrega", 105, 1116).

conexaoGH(c86, c91, "R. Nóbrega", 100, 992).

conexaoGH(c91, c95, "R. Nóbrega", 100, 868).

conexaoGH(c95, c100, "R. Nóbrega", 120, 744).

conexaoGH(c100, c105, "R. Nóbrega", 110, 620).

conexaoGH(c105, c110, "R. Nóbrega", 110, 744).



conexaoGH(c75, c74, "R. Pres. João Pessoa", 120, 1364).

conexaoGH(c87, c75, "R. Pres. João Pessoa", 90, 1240).

conexaoGH(c92, c87, "R. Pres. João Pessoa", 100, 992).

conexaoGH(c96, c92, "R. Pres. João Pessoa", 105, 868).

conexaoGH(c101, c96, "R. Pres. João Pessoa", 130, 992).

conexaoGH(c106, c101, "R. Pres. João Pessoa", 140, 620).

conexaoGH(c111, c106, "R. Pres. João Pessoa", 120, 496).

conexaoGH(c115, c111, "R. Pres. João Pessoa", 90, 620).

conexaoGH(c117, c115, "R. Pres. João Pessoa", 100, 744).



conexaoGH(c77, c76, "R. Ten. Mesquita", 110, 1240).



conexaoGH(c78, c79, "R. Geraldo Martins", 110, 992).

conexaoGH(c79, c88, "R. Geraldo Martins", 80, 868).

conexaoGH(c88, c93, "R. Geraldo Martins", 70, 744).

conexaoGH(c93, c97, "R. Geraldo Martins", 90, 620).

conexaoGH(c97, c102, "R. Geraldo Martins", 115, 496).

conexaoGH(c102, c107, "R. Geraldo Martins", 120, 372).

conexaoGH(c107, c112, "R. Geraldo Martins", 120, 248).



conexaoGH(c112, c118, "R. Dom Bosco", 145, 124).



conexaoGH(c119, c113, "R. Santa Rosa", 140, 372).

conexaoGH(c113, c108, "R. Santa Rosa", 110, 992).

conexaoGH(c108, c103, "R. Santa Rosa", 90, 868).

conexaoGH(c103, c98, "R. Santa Rosa", 110, 744).

conexaoGH(c98, c89, "R. Santa Rosa", 80, 1612).

conexaoGH(c89, c80, "R. Santa Rosa", 130, 1488).

conexaoGH(c80, c74, "R. Santa Rosa", 210, 1364).




%Implementação A-Estrela!

%Retorna a solucao quando atinge o nó objetivo, no nosso caso, c119
aEstrela([[G,H,F,No|Caminho]|_],[G,H,F,Solucao]):-
    objetivo(No),
    reverse([No|Caminho], Solucao), !.

aEstrela([Caminho| Caminhos], Solucao):-
    estendeAEstrela(Caminho, NovosCaminhos),
    append(Caminhos, NovosCaminhos, Caminhos1),
    ordenaAEstrela(Caminhos1, Caminhos2),
    aEstrela(Caminhos2, Solucao).

estendeAEstrela([GC, _, _, No|Caminho], NovosCaminhos):-
	findall([GNovo, HNovo, FNovo, NovoNo, No|Caminho], 
            (	conexaoFn(No, NovoNo, _, GN, HN, _),
                not(member(NovoNo, [No|Caminho])),
                GNovo is GC + GN,
                HNovo is HN,
                FNovo is GNovo + HNovo ), NovosCaminhos).

ordenaAEstrela(Caminhos, CaminhosOrd):-
    quicksort(Caminhos, CaminhosOrd).

quicksort([],[]).
quicksort([X|Cauda], ListaOrd):-
    particionar(X,Cauda,Menor,Maior),
    quicksort(Menor,MenorOrd),
    quicksort(Maior,MaiorOrd),
    append(MenorOrd, [X|MaiorOrd],ListaOrd).

particionar(_, [], [], []).
particionar(X, [Y|Cauda], [Y|Menor], Maior):-
    maior(X,Y),!,
    particionar(X,Cauda,Menor,Maior).

particionar(X,[Y|Cauda],Menor,[Y|Maior]):-
    particionar(X,Cauda,Menor,Maior).




maior([_,_,F1|_],[_,_,F2|_]) :- F1 > F2.

buscaAEstrela(Origem, Solucao):-
    conexaoHn(_, Origem, _, HInicial),
    GInicial is 0,
    FInicial is GInicial+HInicial,
    aEstrela([[GInicial, HInicial, FInicial, Origem]], Solucao).

%Definição do predicado conexão
%Definicao de conexaoGH usando a funçao f(n)=g(n) + h(n)
%CA= Cruzamento A, CB = Cruzamento B
conexaoFn(CA, CB, Rua, G, H, F):-
    conexaoGH(CA,CB,Rua,G,H),
    F is G+H.


%Definicao de conexao sem heuristica
conexao(CA, CB, Rua):-
    conexaoGH(CA, CB, Rua, _, _).

%Definicao usando custo g(n). Útil para uso do branch-and-bound(BFS + Gn).
conexaoGn(CA, CB, Rua, G):-
    conexaoGH(CA,CB, Rua, G, _).

%Definicao usando heuristica H(n). Util para uso do best-first(bfs + Hn)
conexaoHn(CA, CB, Rua, H):-
    conexaoGH(CA,CB,Rua,_,H).


%Objetivo fixado, maior limitação do A*, não podemos facilmente mudar de objetivo, só a origem.
objetivo(c119).

%Implementação do branchAndBound
%Retorna a solucao quando atinge o nó objetivo, no nosso caso, c119
branchAndBound([[G,No|Caminho]|_],[G,Solucao]):-
    objetivo(No),
    reverse([No|Caminho], Solucao), !.

branchAndBound([Caminho| Caminhos], Solucao):-
    estendebranchAndBound(Caminho, NovosCaminhos),
    append(Caminhos, NovosCaminhos, Caminhos1),
    ordenabranchAndBound(Caminhos1, Caminhos2),
    branchAndBound(Caminhos2, Solucao).

estendebranchAndBound([GC, No|Caminho], NovosCaminhos):-
	findall([GNovo, NovoNo, No|Caminho], 
            (	conexaoGn(No, NovoNo, _, GN),
                not(member(NovoNo, [No|Caminho])),
                GNovo is GC + GN
             ), NovosCaminhos).

ordenabranchAndBound(Caminhos, CaminhosOrd):-
    quicksortBab(Caminhos, CaminhosOrd).

quicksortBab([],[]).
quicksortBab([X|Cauda], ListaOrd):-
    particionarBab(X,Cauda,Menor,Maior),
    quicksortBab(Menor,MenorOrd),
    quicksortBab(Maior,MaiorOrd),
    append(MenorOrd, [X|MaiorOrd],ListaOrd).

particionarBab(_, [], [], []).
particionarBab(X, [Y|Cauda], [Y|Menor], Maior):-
    maiorBab(X,Y),!,
    particionarBab(X,Cauda,Menor,Maior).

particionarBab(X,[Y|Cauda],Menor,[Y|Maior]):-
    particionarBab(X,Cauda,Menor,Maior).




maiorBab([G1|_],[G2|_]) :- G1 > G2.

buscaBab(Origem, Solucao):-
    GInicial is 0,
    branchAndBound([[GInicial, Origem]], Solucao).
%BUSCA EM LARGURA
% Predicado principal
buscar(Inicio, Objetivo, Caminho, Arestas) :-
    length(Caminho, NumVertices),
    Arestas is NumVertices-1,
    bfs([[Inicio]], Objetivo, Caminho, []),
    !.

% Caso base: o primeiro caminho na fila alcança o objetivo
bfs([[Objetivo | Resto] | _], Objetivo, Caminho, _) :-
    reverse([Objetivo | Resto], Caminho).

% Passo recursivo: expandir o próximo nó, considerando nós visitados
bfs([[NoAtual | CaminhoParcial] | OutrosCaminhos], Objetivo, Caminho, Visitados) :-
    findall(
        [ProximoNo, NoAtual | CaminhoParcial],
        (
            conexao(NoAtual, ProximoNo, _), 
            \+ member(ProximoNo, [NoAtual | Visitados])
        ),
        NovosCaminhos
    ),
    %junta caminhos que ainda estão na fila com os novos caminhos gerados
    append(OutrosCaminhos, NovosCaminhos, CaminhosAtualizados),
    %busca continua com a fila de caminhos atualizada, incluindo o nó atual na lista de visitados p/ evitar loops
    bfs(CaminhosAtualizados, Objetivo, Caminho, [NoAtual | Visitados]).